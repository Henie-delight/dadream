<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í†µì‹ ì‚¬ ìš”ê¸ˆì œ ì¡°íšŒ</title>
    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Apple SD Gothic Neo', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .update-time {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            padding: 0 20px 0 0;
            border-right: 2px solid #e0e0e0;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .update-time::before {
            content: "ğŸ•";
            font-size: 1.3rem;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 500px;
            min-width: 250px;
        }

        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1rem;
            background: white;
            color: #333;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-box::after {
            content: "ğŸ”";
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .tab-menu {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            background: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tab-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .tab-btn.active img {
            filter: brightness(0) invert(1);
        }

        .tab-btn img {
            height: 30px;
            object-fit: contain;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        .comparison-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .comparison-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .comparison-header h2 {
            font-size: 1.8rem;
            color: #333;
            font-weight: bold;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .comparison-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .comparison-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .comparison-card h3 {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .comparison-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .comparison-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #ddd;
            transition: all 0.2s ease;
        }

        .comparison-item:hover {
            transform: translateX(5px);
        }

        .comparison-item.skb-border { border-left-color: #E60012; }
        .comparison-item.skt-border { border-left-color: #FF6B00; }
        .comparison-item.kt-border { border-left-color: #0066CC; }
        .comparison-item.lg-border { border-left-color: #A50034; }

        .carrier-name {
            font-weight: 600;
            color: #555;
            font-size: 0.95rem;
        }

        .price {
            font-weight: bold;
            color: #667eea;
            font-size: 1rem;
        }

        .price.best {
            color: #28a745;
            font-size: 1.1rem;
        }

        .price.best::after {
            content: " ğŸ†";
            font-size: 0.9rem;
        }

        .carrier-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .carrier-btn {
            background: white;
            border: none;
            padding: 20px 30px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-direction: column;
        }

        .carrier-btn img {
            height: 40px;
            width: auto;
            object-fit: contain;
        }

        .carrier-btn.active img {
            filter: brightness(0) invert(1);
        }

        .carrier-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .carrier-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .carrier-btn.skb { border-left: 5px solid #E60012; }
        .carrier-btn.skt { border-left: 5px solid #FF6B00; }
        .carrier-btn.kt { border-left: 5px solid #0066CC; }
        .carrier-btn.lg { border-left: 5px solid #A50034; }

        .content-area {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: none;
        }

        .content-area.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .carrier-header {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #f0f0f0;
        }

        .carrier-header.skb { color: #E60012; }
        .carrier-header.skt { color: #FF6B00; }
        .carrier-header.kt { color: #0066CC; }
        .carrier-header.lg { color: #A50034; }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .rate-table th,
        .rate-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .rate-table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #333;
            position: sticky;
            top: 0;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        .rate-table td:last-child {
            text-align: right;
            font-weight: bold;
            color: #667eea;
        }

        .category-cell {
            vertical-align: top;
            font-weight: 600;
            color: #555;
            border-right: 2px solid #e0e0e0;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 1.1rem;
        }

        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .search-box {
                width: 100%;
                max-width: 100%;
            }

            .update-time {
                font-size: 0.9rem;
                padding: 0;
                border-right: none;
                border-bottom: 2px solid #e0e0e0;
                padding-bottom: 10px;
            }

            .comparison-section {
                padding: 20px;
            }

            .comparison-header h2 {
                font-size: 1.4rem;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .comparison-card h3 {
                font-size: 1rem;
            }

            .carrier-btn {
                padding: 15px 20px;
                font-size: 1.1rem;
            }

            .carrier-btn img {
                height: 30px;
            }

            .rate-table {
                font-size: 0.9rem;
            }

            .rate-table th,
            .rate-table td {
                padding: 10px 8px;
            }
        }
    
    
    </style>
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <div class="update-time" id="updateTime">ìµœì¢… ì—…ë°ì´íŠ¸: ë¡œë”©ì¤‘...</div>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ìƒí’ˆëª… ë˜ëŠ” ìš”ê¸ˆìœ¼ë¡œ ê²€ìƒ‰..." onkeyup="searchTable()">
            </div>
        </div>

        <div class="tab-menu">
            <button class="tab-btn active" onclick="showTab('comparison')">
                ğŸ“Š í†µì‹  4ì‚¬ ê¸°ë³¸ ìƒí’ˆ ë¹„êµ
            </button>
            <button class="tab-btn" onclick="showTab('skb')">
                <img src="skb-logo.png" alt="SKB">
            </button>
            <button class="tab-btn" onclick="showTab('skt')">
                <img src="skt-logo.png" alt="SKT">
            </button>
            <button class="tab-btn" onclick="showTab('kt')">
                <img src="kt-logo.png" alt="KT">
            </button>
            <button class="tab-btn" onclick="showTab('lg')">
                <img src="lg-logo.png" alt="LG">
            </button>
        </div>

        <div id="comparison-tab" class="tab-content active">
            <div class="comparison-section">
                <div class="comparison-grid" id="comparisonGrid">
                    <div style="text-align: center; padding: 40px; color: #999;">
                        ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...
                    </div>
                </div>
            </div>
        </div>

        <div id="skb-tab" class="tab-content">
            <div class="carrier-header skb">SKB ìš”ê¸ˆì œ <span style="font-size: 0.8rem; opacity: 0.7; font-weight: normal;">(ë¶€ê°€ì„¸ ë³„ë„)</span></div>
            <table class="rate-table">
                <thead>
                    <tr>
                        <th>ì¹´í…Œê³ ë¦¬</th>
                        <th>ìƒí’ˆëª…</th>
                        <th>ìš”ê¸ˆ (ì›)</th>
                    </tr>
                </thead>
                <tbody id="skb-tbody">
                    <tr><td colspan="3" style="text-align: center; padding: 40px;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                </tbody>
            </table>
        </div>

        <div id="skt-tab" class="tab-content">
            <div class="carrier-header skt">SKT ìš”ê¸ˆì œ <span style="font-size: 0.8rem; opacity: 0.7; font-weight: normal;">(ë¶€ê°€ì„¸ ë³„ë„)</span></div>
            <table class="rate-table">
                <thead>
                    <tr>
                        <th>ì¹´í…Œê³ ë¦¬</th>
                        <th>ìƒí’ˆëª…</th>
                        <th>ìš”ê¸ˆ (ì›)</th>
                    </tr>
                </thead>
                <tbody id="skt-tbody">
                    <tr><td colspan="3" style="text-align: center; padding: 40px;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                </tbody>
            </table>
        </div>

        <div id="kt-tab" class="tab-content">
            <div class="carrier-header kt">KT ìš”ê¸ˆì œ</div>
            <table class="rate-table">
                <thead>
                    <tr>
                        <th>ì¹´í…Œê³ ë¦¬</th>
                        <th>ìƒí’ˆëª…</th>
                        <th>ìš”ê¸ˆ (ì›)</th>
                    </tr>
                </thead>
                <tbody id="kt-tbody">
                    <tr><td colspan="3" style="text-align: center; padding: 40px;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                </tbody>
            </table>
        </div>

        <div id="lg-tab" class="tab-content">
            <div class="carrier-header lg">LG í™ˆ ìš”ê¸ˆì œ <span style="font-size: 0.8rem; opacity: 0.7; font-weight: normal;">(ë¶€ê°€ì„¸ ë³„ë„)</span></div>
            <table class="rate-table">
                <thead>
                    <tr>
                        <th>ì¹´í…Œê³ ë¦¬</th>
                        <th>ìƒí’ˆëª…</th>
                        <th>ìš”ê¸ˆ (ì›)</th>
                    </tr>
                </thead>
                <tbody id="lg-tbody">
                    <tr><td colspan="3" style="text-align: center; padding: 40px;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>

        let currentCarrier = null;
        let currentTab = 'comparison';
        const SHEET_ID = '1uqR9uz8WU_AKK3pbQqtejVeqSlPD9u1ZZKBNnP6_siw';
        const SHEET_NAME = 'PRINT';
        const SHEET_URL = `https://docs.google.com/spreadsheets/d/$\{SHEET_ID\}/gviz/tq?tqx=out:csv&sheet=$\{SHEET_NAME\}`;
        
        let carrierData = {
            skb: [],
            skt: [],
            kt: [],
            lg: []
        };

        function showTab(tabName) {
            currentTab = tabName;
            currentCarrier = (tabName === 'comparison') ? null : tabName;
            
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.remove('active');
            });

            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            const tabContent = document.getElementById(`$\{tabName\}-tab`);
            if (tabContent) {
                tabContent.classList.add('active');
            }

            // Add active class to clicked button
            event.target.closest('.tab-btn').classList.add('active');

            // Clear or re-apply search
            const searchInput = document.getElementById('searchInput');
            searchInput.value = '';
            if (tabName !== 'comparison' && searchInput.value) {
                searchTable();
            }
        }

        function searchTable() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            
            if (!currentCarrier || currentTab === 'comparison') {
                return;
            }

            const tabContent = document.getElementById(`$\{currentCarrier\}-tab`);
            const table = tabContent.querySelector('.rate-table tbody');
            
            if (!table) return;

            const rows = table.getElementsByTagName('tr');
            let visibleCount = 0;

            for (let i = 0; i < rows.length; i++) {
                const cells = rows[i].getElementsByTagName('td');
                let found = false;

                for (let j = 0; j < cells.length; j++) {
                    const cellText = cells[j].textContent || cells[j].innerText;
                    if (cellText.toLowerCase().indexOf(filter) > -1) {
                        found = true;
                        break;
                    }
                }

                if (found) {
                    rows[i].style.display = '';
                    visibleCount++;
                } else {
                    rows[i].style.display = 'none';
                }
            }

            let noResultsMsg = document.getElementById('no-results-' + currentCarrier);
            if (visibleCount === 0 && filter !== '') {
                if (!noResultsMsg) {
                    noResultsMsg = document.createElement('div');
                    noResultsMsg.id = 'no-results-' + currentCarrier;
                    noResultsMsg.className = 'no-results';
                    noResultsMsg.innerHTML = 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ğŸ”';
                    tabContent.appendChild(noResultsMsg);
                }
                noResultsMsg.style.display = 'block';
            } else if (noResultsMsg) {
                noResultsMsg.style.display = 'none';
            }
        }

        // Google Sheets ì„¤ì •
        const SHEET_ID = '1uqR9uz8WU_AKK3pbQqtejVeqSlPD9u1ZZKBNnP6_siw';
        const SHEET_NAME = 'PRINT';
        const SHEET_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&sheet=${SHEET_NAME}`;

        

        function showTab(tabName) {
            currentTab = tabName;
            currentCarrier = (tabName === 'comparison') ? null : tabName;
            
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.remove('active');
            });

            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            const tabContent = document.getElementById(`${tabName}-tab`);
            if (tabContent) {
                tabContent.classList.add('active');
            }

            // Add active class to clicked button
            document.querySelectorAll('.tab-btn').forEach(btn => {
                if (btn.onclick.toString().includes(tabName)) {
                    btn.classList.add('active');
                }
            });

            // Clear or re-apply search
            const searchInput = document.getElementById('searchInput');
            if (tabName !== 'comparison' && searchInput.value) {
                searchTable();
            }
        }

        // CSV íŒŒì‹± í•¨ìˆ˜
        function parseCSV(csv) {
            const lines = csv.split('\n');
            const result = [];
            
            for (let line of lines) {
                if (!line.trim()) continue;
                
                // CSV íŒŒì‹± (ë”°ì˜´í‘œ ì²˜ë¦¬ í¬í•¨)
                const values = [];
                let current = '';
                let inQuotes = false;
                
                for (let i = 0; i < line.length; i++) {
                    const char = line[i];
                    
                    if (char === '"') {
                        inQuotes = !inQuotes;
                    } else if (char === ',' && !inQuotes) {
                        values.push(current.trim());
                        current = '';
                    } else {
                        current += char;
                    }
                }
                values.push(current.trim());
                result.push(values);
            }
            
            return result;
        }

        // ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
        async function loadData() {
            try {
                const response = await fetch(SHEET_URL);
                const csv = await response.text();
                const data = parseCSV(csv);
                
                // ë°ì´í„° íŒŒì‹± (4ê°œ ì»¬ëŸ¼ì”© ë‚˜ëˆ„ì–´ì ¸ ìˆìŒ)
                // ì»¬ëŸ¼ êµ¬ì¡°: SKB(B-D), SKT(F-H), KT(J-L), LG(N-P)
                
                const updateTime = data[3] && data[3][1] ? data[3][1] : '2026. 1. 2 10:00';
                document.getElementById('updateTime').innerHTML = `ğŸ• ìµœì¢… ì—…ë°ì´íŠ¸: ${updateTime}`;
                
                // ê° í†µì‹ ì‚¬ ë°ì´í„° ì¶”ì¶œ (6í–‰ë¶€í„° ì‹œì‘)
                carrierData.skb = extractCarrierData(data, 1, 3); // B-D ì»¬ëŸ¼ (ì¸ë±ìŠ¤ 1-3)
                carrierData.skt = extractCarrierData(data, 5, 7); // F-H ì»¬ëŸ¼ (ì¸ë±ìŠ¤ 5-7)
                carrierData.kt = extractCarrierData(data, 9, 11); // J-L ì»¬ëŸ¼ (ì¸ë±ìŠ¤ 9-11)
                carrierData.lg = extractCarrierData(data, 13, 15); // N-P ì»¬ëŸ¼ (ì¸ë±ìŠ¤ 13-15)
                
                // í…Œì´ë¸” ë Œë”ë§
                renderTable('skb', carrierData.skb);
                renderTable('skt', carrierData.skt);
                renderTable('kt', carrierData.kt);
                renderTable('lg', carrierData.lg);
                
                // ë¹„êµ ì„¹ì…˜ ë Œë”ë§
                renderComparison();
                
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                document.getElementById('updateTime').innerHTML = 'ğŸ• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨';
            }
        }

        // í†µì‹ ì‚¬ ë°ì´í„° ì¶”ì¶œ
        function extractCarrierData(data, startCol, endCol) {
            const result = [];
            
            for (let i = 5; i < data.length; i++) {
                const row = data[i];
                if (!row || row.length < endCol) continue;
                
                const category = row[startCol] || '';
                const product = row[startCol + 1] || '';
                const price = row[startCol + 2] || '';
                
                if (product && product.trim()) {
                    result.push({
                        category: category.trim(),
                        product: product.trim(),
                        price: price.trim()
                    });
                }
            }
            
            return result;
        }

        // í…Œì´ë¸” ë Œë”ë§
        function renderTable(carrier, data) {
            const tbody = document.getElementById(`${carrier}-tbody`);
            if (!tbody || !data || data.length === 0) {
                if (tbody) tbody.innerHTML = '<tr><td colspan="3" style="text-align: center; padding: 40px;">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                return;
            }
            
            let html = '';
            let lastCategory = '';
            let categoryRowspan = 0;
            let categoryStartIndex = 0;
            
            // ë¨¼ì € ì¹´í…Œê³ ë¦¬ë³„ rowspan ê³„ì‚°
            const categoryGroups = [];
            let currentGroup = [];
            
            for (let i = 0; i < data.length; i++) {
                if (data[i].category) {
                    if (currentGroup.length > 0) {
                        categoryGroups.push(currentGroup);
                    }
                    currentGroup = [data[i]];
                    lastCategory = data[i].category;
                } else {
                    currentGroup.push(data[i]);
                }
            }
            if (currentGroup.length > 0) {
                categoryGroups.push(currentGroup);
            }
            
            // í…Œì´ë¸” ìƒì„±
            for (let group of categoryGroups) {
                const category = group[0].category;
                const rowspan = group.length;
                
                for (let i = 0; i < group.length; i++) {
                    html += '<tr>';
                    if (i === 0) {
                        html += `<td rowspan="${rowspan}" class="category-cell">${category}</td>`;
                    }
                    html += `<td>${group[i].product}</td>`;
                    html += `<td>${group[i].price}</td>`;
                    html += '</tr>';
                }
            }
            
            tbody.innerHTML = html;
        }

        // ë¹„êµ ì„¹ì…˜ ë Œë”ë§
        function renderComparison() {
            const comparisonData = [
                { title: '100M ì¸í„°ë„·', skb: '360,000', skt: '360,000', kt: '180,000', lg: '400,000' },
                { title: '500M ì¸í„°ë„·', skb: '-', skt: '460,000', kt: '270,000', lg: '490,000' },
                { title: '100M + TV ìŠ¤íƒ ë‹¤ë“œ', skb: '755,000', skt: '670,000', kt: '690,000', lg: '800,000' },
                { title: '500M + TV ìŠ¤íƒ ë‹¤ë“œ', skb: '-', skt: '760,000', kt: '790,000', lg: '-' }
            ];
            
            let html = '';
            
            for (let item of comparisonData) {
                const prices = {
                    skb: item.skb === '-' ? 0 : parseInt(item.skb.replace(/,/g, '')),
                    skt: item.skt === '-' ? 0 : parseInt(item.skt.replace(/,/g, '')),
                    kt: item.kt === '-' ? 0 : parseInt(item.kt.replace(/,/g, '')),
                    lg: item.lg === '-' ? 0 : parseInt(item.lg.replace(/,/g, ''))
                };
                
                const maxPrice = Math.max(prices.skb, prices.skt, prices.kt, prices.lg);
                
                html += `
                    <div class="comparison-card">
                        <h3>${item.title}</h3>
                        <div class="comparison-items">
                            <div class="comparison-item skb-border">
                                <span class="carrier-name">SKB</span>
                                <span class="price ${prices.skb === maxPrice && prices.skb > 0 ? 'best' : ''}">${item.skb}${item.skb !== '-' ? 'ì›' : ''}</span>
                            </div>
                            <div class="comparison-item skt-border">
                                <span class="carrier-name">SKT</span>
                                <span class="price ${prices.skt === maxPrice && prices.skt > 0 ? 'best' : ''}">${item.skt}${item.skt !== '-' ? 'ì›' : ''}</span>
                            </div>
                            <div class="comparison-item kt-border">
                                <span class="carrier-name">KT</span>
                                <span class="price ${prices.kt === maxPrice && prices.kt > 0 ? 'best' : ''}">${item.kt}${item.kt !== '-' ? 'ì›' : ''}</span>
                            </div>
                            <div class="comparison-item lg-border">
                                <span class="carrier-name">LG</span>
                                <span class="price ${prices.lg === maxPrice && prices.lg > 0 ? 'best' : ''}">${item.lg}${item.lg !== '-' ? 'ì›' : ''}</span>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('comparisonGrid').innerHTML = html;
        }

        function showCarrier(carrier) {
            currentCarrier = carrier;
            
            document.querySelectorAll('.content-area').forEach(el => {
                el.classList.remove('active');
            });

            document.querySelectorAll('.carrier-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            const contentId = carrier + '-content';
            const contentEl = document.getElementById(contentId);
            if (contentEl) {
                contentEl.classList.add('active');
            }

            const buttons = document.querySelectorAll('.carrier-btn');
            buttons.forEach(btn => {
                if (btn.classList.contains(carrier)) {
                    btn.classList.add('active');
                }
            });

            const searchInput = document.getElementById('searchInput');
            if (searchInput.value) {
                searchTable();
            }
        }

        function searchTable() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            
            if (!currentCarrier) {
                return;
            }

            const contentId = currentCarrier + '-content';
            const table = document.querySelector(`#${contentId} .rate-table tbody`);
            
            if (!table) return;

            const rows = table.getElementsByTagName('tr');
            let visibleCount = 0;

            for (let i = 0; i < rows.length; i++) {
                const cells = rows[i].getElementsByTagName('td');
                let found = false;

                for (let j = 0; j < cells.length; j++) {
                    const cellText = cells[j].textContent || cells[j].innerText;
                    if (cellText.toLowerCase().indexOf(filter) > -1) {
                        found = true;
                        break;
                    }
                }

                if (found) {
                    rows[i].style.display = '';
                    visibleCount++;
                } else {
                    rows[i].style.display = 'none';
                }
            }

            let noResultsMsg = document.getElementById('no-results-' + currentCarrier);
            if (visibleCount === 0 && filter !== '') {
                if (!noResultsMsg) {
                    noResultsMsg = document.createElement('div');
                    noResultsMsg.id = 'no-results-' + currentCarrier;
                    noResultsMsg.className = 'no-results';
                    noResultsMsg.innerHTML = 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ğŸ”';
                    document.getElementById(contentId).appendChild(noResultsMsg);
                }
                noResultsMsg.style.display = 'block';
            } else if (noResultsMsg) {
                noResultsMsg.style.display = 'none';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        window.addEventListener('DOMContentLoaded', loadData);
    
    </script>
</body>
</html>